<!DOCTYPE html>
<html ng-cloak  ng-app="app" ng-controller="MainController as mainCtrl" itemscope itemtype="http://schema.org/Article">
  <head>
    <title ng-init="id = 0" ng-bind="id ? mainCtrl.page_title('Editing a report') : mainCtrl.page_title('Creating a report')">Create/edit report - Camptocamp.org</title>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#F7931D">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Camptocamp.org">
    <meta name="application-name" content="Camptocamp.org">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="robots" content="noindex,nofollow">
    <style>
      [ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak {
        display: none !important;
      };
    </style>
    <link rel="stylesheet" href="https://www.camptocamp.org//static/e2dd4b1/build/deps.css">
    <link rel="stylesheet" href="https://www.camptocamp.org//static/e2dd4b1/build/build.min.css">
    <link rel="stylesheet" href="https://www.camptocamp.org//static/e2dd4b1/build/build-print.min.css" media="print">
    
  </head>
  <body class="on-load loading">
    <aside id="sidemenu">
  <div class="page-menu">
    <button class="btn btn-default menu-open-close menu">
      <span>
      </span>
    </button>
    <a class="homepage" href="/" title="{{'Back to homepage'|translate}}">
      <img src="https://www.camptocamp.org/static/e2dd4b1/img/logo.svg" alt="Camptocamp.org" class="logo"/>
    </a>
  </div>
  <ul class="nav">
    <li class="main-menu" ng-class="{'menu-selected': mainCtrl.isPath('/') === 'home' }">
      <a href="/">
        <i class="glyphicon glyphicon-home" tooltip-placement="right" uib-tooltip="{{'Home' | translate}}"></i>
        <span class="menu-text" translate>Home</span>
      </a>
    </li>
    <li class="main-menu" ng-class="{'menu-selected': mainCtrl.isPath('topoguide')}">
      <a href="/topoguide">
        <i class="glyphicon glyphicon-arrow-right" tooltip-placement="right" uib-tooltip="{{'Topoguide' | translate}}"></i>
        <span class="menu-text" translate>Topoguide</span>
      </a>
    </li>
    <li class="main-menu" ng-class="{'menu-selected': mainCtrl.isPath('outings')}">
      <a href="/outings">
        <i class="glyphicon glyphicon-time" tooltip-placement="right" uib-tooltip="{{'Outings' | translate}}"></i>
        <span class="menu-text" translate>Outings</span>
      </a>
    </li>
    <li class="main-menu" ng-class="{'menu-selected': mainCtrl.isPath('forum')}">
      <a href="https://forum.camptocamp.org/">
        <i class="glyphicon glyphicon-comment" tooltip-placement="right" uib-tooltip="{{'Forum' | translate}}"></i>
        <span class="menu-text" translate>Forum</span>
      </a>
    </li>
    <li class="main-menu" ng-class="{'menu-selected': mainCtrl.isPath('xreports') || mainCtrl.isPath('serac')}">
      <a href="/serac">
        <i class="glyphicon glyphicon-warning-sign" tooltip-placement="right" uib-tooltip="{{'Accident database' | translate}}"></i>
        <span class="menu-text" translate>Accident database</span>
      </a>
    </li>
    <li class="main-menu" ng-class="{'menu-selected': mainCtrl.isPath('articles')}">
      <a href="/articles">
        <i class="glyphicon glyphicon-info-sign" tooltip-placement="right" uib-tooltip="{{'Articles' | translate}}"></i>
        <span class="menu-text" translate>Articles</span>
      </a>
    </li>
  </ul>

  <footer>
    <div class="advertisement">
      <iframe src="/static/e2dd4b1/affiz.html" width="160" height="320" frameborder="0" scrolling="no"></iframe>
    </div>

    <ul class="footer-nav">
      <li><a href="/articles/106727" translate>contact</a></li>
      <span class="bullet">&bull; </span>
      <li><a href="/articles/121965" translate>credits</a></li>
      <span class="bullet">&bull; </span>
      <li><a href="/articles/106731" translate>terms of use</a></li>
      <span class="bullet">&bull; </span>
      <li><a href="/articles/106728" translate>content license</a></li>
      <span class="bullet">&bull; </span>
      <li><a href="/articles/106726" translate>Association</a></li>
    </ul>

    <div class="version">
      <a href="https://github.com/c2corg/v6_ui">
        <span translate>Version:</span> v6.1.13
      </a>
    </div>

    <div class="social-networks">
      <div class="icons">
        <a href="https://twitter.com/camptocamporg"><span class="icon-twitter"></span></a>
        <a href="https://plus.google.com/104270548458536561874/posts"><span class="icon-google-plus"></span></a>
        <a href="https://www.facebook.com/camptocamp.org/"><span class="icon-facebook"></span></a>
      </div>
    </div>
  </footer>

</aside>

    <img src="/static/e2dd4b1/img/loading.gif" class="loading-gif">
    <main class="page-content">
      








<section class="create-edit-document">

  <h1 ng-init="id = 0" class="text-center">
    <label class="label label-primary" ng-bind="id ? ('Editing a report' | translate) : ('Creating a report' | translate)"></label>
  </h1>

  <form app-loading app-document-editing="xreports" app-document-editing-model="xreport"
    app-document-editing-controller-name="appXreportEditingController"
    class="document-editing" name="editForm" novalidate ng-submit="editCtrl.confirmSave(editForm.$valid)">

    <app-progress-bar>
      <span class="ng-hide">{{progressBarCtrl.maxSteps = 2}} </span>

      <ul class="progress-bar-edit">
        <li class="nav-step-1" ng-click="progressBarCtrl.step(1, 'xreport',  'backwards')" ng-class="{'nav-step-selected': progressBarCtrl.currentStep == 1 }"><span class="nav-text"><span translate>xreport</span> & <span translate>general</span></span><span class="bullet-container"><span class="bullet"></span></span></li>
        <li class="nav-step-2" ng-click="progressBarCtrl.step(2, 'xreport', progressBarCtrl.previousStep >= 2 ? 'backwards' : 'forwards')"><span class="nav-text"><span translate>Comments</span> & <span translate>factors</span></span></span><span class="bullet-container"><span class="bullet"></span></span></li>
      </ul>

      <div class="nav-buttons">
        <button class="btn btn-primary prev" type="button" ng-if="progressBarCtrl.previousStep !== 0" ng-click="progressBarCtrl.step(progressBarCtrl.previousStep, 'xreport', 'backwards')"><span class="glyphicon glyphicon-triangle-left"></span></button>
        <button class="btn btn-primary next" type="button" ng-if="progressBarCtrl.nextStep <= progressBarCtrl.maxSteps" ng-click="progressBarCtrl.step(progressBarCtrl.nextStep, 'xreport', 'forwards')"><span class="glyphicon glyphicon-triangle-right"></span></button>
      </div>
    </app-progress-bar>

      <article class="protected-warning" ng-show="xreport.protected">
    <span class="glyphicon glyphicon-warning-sign"></span>&nbsp;<span translate>This document is protected and can be edited by moderators only.</span>
  </article>


    <section class="editing">

      <div class="step step-1">

        <section class="section title">
          <h2 class="heading show-phone" translate>general informations</h2>
          <div class="content">

            <div id="title-group" class="form-group"
                 ng-class="{ 'has-feedback': editForm.title.$touched,
                             'has-error': editForm.title.$touched && editForm.title.$invalid,
                             'has-success': editForm.title.$valid }">
              <label ng-class="{ 'control-label': editForm.title.$touched && editForm.title.$invalid }"><span translate>title</span> *</label>
              <input type="text" name="title" ng-model="xreport.locales[0].title" ng-minlength="3" class="form-control" required />
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="editForm.title.$valid"></span>
              <span class="glyphicon glyphicon-warning-sign form-control-feedback" ng-show="editForm.title.$invalid && editForm.title.$touched"></span>
              <div class="help-block" ng-messages="editForm.title.$error" ng-if="editForm.title.$invalid && editForm.title.$touched">
                <p ng-message="required" translate>This field is required.</p>
                <p ng-message="minlength" translate>Title must have at least 3 characters.</p>
              </div>
            </div>

            <div id="lang-group" class="form-group"
                 ng-class="{ 'has-feedback': editForm.lang.$touched,
                             'has-error': editForm.lang.$touched && editForm.lang.$invalid,
                             'has-success': editForm.lang.$valid}">
              <label ng-class="{ 'control-label': editForm.lang.$touched && editForm.lang.$invalid }"><span translate>lang</span> *</label>
                <select name="lang" ng-options="lang as mainCtrl.translate(lang) for lang in ['fr','it','de','en','es','ca','eu'] | translate" ng-model="xreport.locales[0].lang" class="form-control" required><option value=""></option></select>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.locales[0].lang"></span>
              <span class="glyphicon glyphicon-warning-sign form-control-feedback" ng-show="editForm.lang.$touched && editForm.lang.$invalid"></span>
              <div class="help-block" ng-messages="editForm.lang.$error" ng-if="editForm.lang.$touched && editForm.lang.$invalid">
                <p ng-message="required" translate>This field is required.</p>
              </div>
            </div>

            <div class="form-group data full" id="route-activities" ng-init="activities = [&#39;skitouring&#39;, &#39;snow_ice_mixed&#39;, &#39;mountain_climbing&#39;, &#39;rock_climbing&#39;, &#39;ice_climbing&#39;, &#39;hiking&#39;, &#39;snowshoeing&#39;, &#39;paragliding&#39;, &#39;mountain_biking&#39;, &#39;via_ferrata&#39;, &#39;slacklining&#39;]">
              <label app-context-help context-help-title="{{'activities' | translate}}" context-help-content-url="/static/partials/contexthelp/activities.html"><span translate>activities</span> *</label>
              <div class="route-activities">
                <div ng-repeat="activity in activities" class="activity">
                  <div>
                    <div class="icon-{{activity}}" class="icon-" ng-click="editCtrl.pushToArray(xreport, 'activities', activity, $event)"
                         ng-class="{'activity-selected' : xreport.activities.indexOf(activity) > -1}">
                    </div>
                    <p>{{activity | translate}}</p>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </section>

        <section class="section maps-info">
          <h2 class="heading show-phone"><span translate>geolocation</span></h2>
          <div class="content" id="edit-maps">

            <div id="elevation-group" class="form-group data third" ng-if="type != 'climbing_indoor' "
                 ng-class="{ 'has-feedback': editForm.elevation.$touched,
                             'has-error': editForm.elevation.$touched && editForm.elevation.$invalid,
                             'has-success': editForm.elevation.$valid && xreport.elevation }">
              <label ng-class="{ 'control-label': editForm.elevation.$touched && editForm.elevation.$invalid }" translate>elevation</label>
              <div class="input-group">
                <input type="number" name="elevation" min="0" max="9999" ng-model="xreport.elevation" class="form-control"/>
                <span class="input-group-addon">m</span>
              </div>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="editForm.elevation.$valid && xreport.elevation"></span>
              <span class="glyphicon glyphicon-warning-sign form-control-feedback" ng-show="editForm.elevation.$invalid && editForm.elevation.$touched"></span>
              <div class="help-block" ng-messages="editForm.elevation.$error" ng-if="editForm.elevation.$invalid && editForm.elevation.$touched">
                <p ng-message="max" translate>This field must be lower than 9999 m.</p>
                <p ng-message="number" translate>This field must be a number.</p>
              </div>
            </div>

            <div id="lon-group" class="form-group data third"
                 ng-class="{ 'has-feedback': editForm.longitude.$touched,
                             'has-error': editForm.longitude.$touched && editForm.longitude.$invalid,
                             'has-success': editForm.longitude.$valid && xreport.lonlat.longitude}">
              <label ng-class="{ 'control-label': editForm.longitude.$touched && editForm.longitude.$invalid }"><span translate>Longitude</span> *</label>
              <div class="input-group">
                <input type="number" name="longitude" ng-model="xreport.lonlat.longitude" ng-change="editCtrl.updateMap()" class="form-control" required min="-180" max="180" />
                <span class="input-group-addon">°E</span>
              </div>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="editForm.longitude.$valid && xreport.lonlat.longitude"></span>
              <span class="glyphicon glyphicon-warning-sign form-control-feedback" ng-show="editForm.longitude.$invalid && editForm.longitude.$touched"></span>
              <div class="help-block" ng-messages="editForm.longitude.$error" ng-if="editForm.longitude.$invalid && editForm.longitude.$touched">
                <p ng-message="required" translate>This field is required.</p>
                <p ng-message="number" translate>This field must be a number.</p>
                <p ng-message="min" translate>This field must be between -180° and 180°.</p>
                <p ng-message="max" translate>This field must be between -180° and 180°.</p>
              </div>
            </div>

            <div id="lat-group" class="form-group data third"
                 ng-class="{ 'has-feedback': editForm.latitude.$touched,
                             'has-error': editForm.latitude.$touched && editForm.latitude.$invalid,
                             'has-success': editForm.latitude.$valid && xreport.lonlat.latitude}">
              <label ng-class="{ 'control-label': editForm.latitude.$touched && editForm.latitude.$invalid }"><span translate>Latitude</span> *</label>
              <div class="input-group">
                <input type="number" name="latitude" ng-model="xreport.lonlat.latitude" ng-change="editCtrl.updateMap()" class="form-control" required min="-90" max="90" />
                <span class="input-group-addon">°N</span>
              </div>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="editForm.longitude.$valid && xreport.lonlat.latitude"></span>
              <span class="glyphicon glyphicon-warning-sign form-control-feedback" ng-show="editForm.latitude.$invalid && editForm.latitude.$touched"></span>
              <div class="help-block" ng-messages="editForm.latitude.$error" ng-if="editForm.latitude.$invalid && editForm.latitude.$touched">
                <p ng-message="required" translate>This field is required.</p>
                <p ng-message="number" translate>This field must be a number.</p>
                <p ng-message="min" translate>This field must be between -90° and 90°.</p>
                <p ng-message="max" translate>This field must be between -90° and 90°.</p>
              </div>
            </div>

            <app-map app-map-edit="true" app-map-show-recenter-tools="true" app-map-draw-type="Point" class="map-edit"></app-map>

          </div>
        </section>

        <section class="section associations">
          <h2 class="heading show-phone"><span translate>associations</span></h2>
          <h5 class="full" translate ng-show="editCtrl.documentService.document.associations.routes.length == 0 && editCtrl.documentService.document.associations.waypoints.length == 0">
            You can add associated documents by searching in the field.
          </h5>
          <div class="content route-associations">
            <app-simple-search parent-id="xreport.document_id"
              app-select="editCtrl.documentService.pushToAssociations(doc)" dataset="roc"></app-simple-search>
              <section ng-show="xreport.associations.routes.length > 0" class="associated-section">
      <label translate>Associated routes</label>
    <article class="associated-documents">
      <div class="list-item" ng-repeat="rte in xreport.associations.routes" ng-class="{'new-item': rte['new']}">
        <app-card app-card-doc="rte" app-card-disable-click="true"></app-card>
        <span class="glyphicon glyphicon-trash" ng-click="editCtrl.documentService.removeAssociation(rte.document_id, 'routes', $event)"></span>
      </div>
    </article>
  </section>

              <section ng-show="xreport.associations.outings.length > 0" class="associated-section">
      <label translate>Associated outings</label>
    <article class="associated-documents">
      <div class="list-item" ng-repeat="out in xreport.associations.outings" ng-class="{'new-item': out['new']}">
        <app-card app-card-doc="out" app-card-disable-click="true"></app-card>
        <span class="glyphicon glyphicon-trash" ng-click="editCtrl.documentService.removeAssociation(out.document_id, 'outings', $event)"></span>
      </div>
    </article>
  </section>

              <section ng-show="xreport.associations.articles.length > 0" class="associated-section">
      <label translate>Associated articles</label>
    <article class="associated-documents">
      <div class="list-item" ng-repeat="art in xreport.associations.articles" ng-class="{'new-item': art['new']}">
        <app-card app-card-doc="art" app-card-disable-click="true"></app-card>
        <span class="glyphicon glyphicon-trash" ng-click="editCtrl.documentService.removeAssociation(art.document_id, 'articles', $event)"></span>
      </div>
    </article>
  </section>

          </div>
        </section>

        <section class="section title">
          <h2 class="heading show-phone" translate>xreport general</h2>
          <div class="content collapse in">

            <div class="date form-group" ng-init="openDateStart = false">
              <label><span translate>date</span> *</label>
              <div class="input-group" ng-model="xreport.date" uib-datepicker-popup="dd MM yyyy" is-open="openDateStart">
                <input type="text" disabled class="form-control" value="{{xreport.date | amDateFormat:'Do MMMM YYYY' }}"/>
                <span class="input-group-btn">
                  <button type="button" class="btn btn-default" ng-click="openDateStart = true"><span class="glyphicon glyphicon-calendar"></span></button>
                </span>
              </div>
            </div>

            <div class="form-group half half-group">
              <label app-context-help context-help-title="{{'event_type' | translate}}" context-help-content="{{'Type of the occurred or potentially resulting event. More than one type may be selected. \'fall while roped\' must be used to clarify \'avalanche\', \'fall of a person or roped party\' and \'fall in a crevasse\', but cannot be selected alone.' | translate}}"><span translate>event_type</span> *</label>
              <ul class="types">
                <li ng-repeat="event_type in [&#39;avalanche&#39;, &#39;stone_fall&#39;, &#39;falling_ice&#39;, &#39;person_fall&#39;, &#39;crevasse_fall&#39;, &#39;roped_fall&#39;, &#39;physical_failure&#39;, &#39;lightning&#39;, &#39;other&#39;]" ng-click="editCtrl.pushToArray(xreport, 'event_type', event_type, $event)">
                  <div class="checkbox"><input type="checkbox" ng-checked="xreport.event_type.indexOf(event_type) > -1"><span>{{event_type | translate}}</span></div>
                </li>
              </ul>
            </div>

            <div class="form-group half"
                 ng-class="{ 'has-feedback': editForm.nb_participants.$touched,
                             'has-error': editForm.nb_participants.$touched && editForm.nb_participants.$invalid,
                             'has-success': xreport.nb_participants }">
              <label ng-class="{ 'control-label': editForm.nb_participants.$touched && editForm.nb_participants.$invalid }" translate>nb_participants</label>
              <div class="input-group">
                <input class="form-control" type="number" min="0" max="1000" minlength="1" name="nb_participants" ng-model="xreport.nb_participants"/>
                <span class="input-group-addon" translate>persons</span>
              </div>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.nb_participants && editForm.xreport.nb_participants.$valid"></span>
              <span class="glyphicon glyphicon-warning-sign form-control-feedback" ng-show="editForm.nb_participants.$touched && editForm.nb_participants.$invalid"></span>
              <div class="help-block" ng-messages="editForm.nb_participants.$error" ng-if="editForm.nb_participants.$touched && editForm.nb_participants.$invalid">
                <p ng-message="number" translate>This field must be a number.</p>
              </div>
            </div>

            <div class="form-group half"
                 ng-class="{ 'has-feedback': editForm.nb_impacted.$touched,
                             'has-error': editForm.nb_impacted.$touched && editForm.nb_impacted.$invalid,
                             'has-success': xreport.nb_impacted }">
              <label ng-class="{ 'control-label': editForm.nb_impacted.$touched && editForm.nb_impacted.$invalid }" app-context-help context-help-title="{{'nb_impacted' | translate}}" context-help-content="{{'Number of impacted persons. If no accident occurred or if no one has fallen, was buried or injured, put 0.' | translate}}" translate >nb_impacted</label>
              <div class="input-group">
                <input class="form-control" type="number" min="0" max="1000" minlength="1" name="nb_impacted" ng-model="xreport.nb_impacted"/>
                <span class="input-group-addon" translate>persons</span>
              </div>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.nb_impacted && editForm.nb_impacted.$valid"></span>
              <span class="glyphicon glyphicon-warning-sign form-control-feedback" ng-show="editForm.nb_impacted.$touched && editForm.nb_impacted.$invalid"></span>
              <div class="help-block" ng-messages="editForm.nb_impacted.$error" ng-if="editForm.nb_impacted.$touched && editForm.nb_impacted.$invalid">
                <p ng-message="number" translate>This field must be a number.</p>
              </div>
            </div>

            <div class="form-group half" ng-class="{'has-success': xreport.severity}" ng-init="severities = [&#39;severity_no&#39;, &#39;1d_to_3d&#39;, &#39;4d_to_1m&#39;, &#39;1m_to_3m&#39;, &#39;more_than_3m&#39;]">
              <label app-context-help context-help-title="{{'severity' | translate}}" context-help-content="{{'Have the impacted persons been injured and forced to temporarily cease the activity performed during this outing?' | translate}}" translate>severity</label>
              <select class="form-control" ng-model="xreport.severity" ng-options="rat as mainCtrl.translate(rat) for rat in severities"><option value=""></option></select>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.severity"></span>
            </div>

            <div class="form-group half" ng-class="{'has-success': xreport.rescue != undefined}">
              <label app-context-help context-help-title="{{'rescue' | translate}}" context-help-content="{{'Has the event required a rescue service?' | translate}}" translate>rescue</label>
              <input type="checkbox" ng-model="xreport.rescue" ng-checked="xreport.rescue == true">
              <span ng-click="editCtrl.pushToArray(xreport, 'rescue', !xreport.rescue, $event)"></span>
            </div>

            <div class="form-group half" ng-if="xreport.event_type.indexOf('avalanche') > -1"
                 ng-class="{'has-success': xreport.avalanche_level}" ng-init="avalanche_levels = [&#39;level_1&#39;, &#39;level_2&#39;, &#39;level_3&#39;, &#39;level_4&#39;, &#39;level_5&#39;, &#39;level_na&#39;]">
              <label app-context-help context-help-title="{{'avalanche_level' | translate}}" context-help-content="{{'Avalanche danger level coming from the avalanche bulletin at the place and time of the event (the avalanche bulletin may indicate a different level depending on the altitude, orientation and time). If there is no avalanche bulletin or it did not mention an avalanche danger level, select \'unavailable\'.' | translate}}" translate>avalanche_level</label>
              <select class="form-control" ng-model="xreport.avalanche_level" ng-options="rat as mainCtrl.translate(rat) for rat in avalanche_levels"><option value=""></option></select>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.avalanche_level"></span>
            </div>

            <div class="form-group half" ng-if="xreport.event_type.indexOf('avalanche') > -1"
                 ng-class="{'has-success': xreport.avalanche_slope}" ng-init="avalanche_slopes = [&#39;slope_lt_30&#39;, &#39;slope_30_35&#39;, &#39;slope_35_40&#39;, &#39;slope_40_45&#39;, &#39;slope_gt_45&#39;]">
              <label app-context-help context-help-title="{{'avalanche_slope' | translate}}" context-help-content="{{'Slope of the steepest part of the start zone of the avalanche.' | translate}}" translate>avalanche_slope</label>
              <select class="form-control" ng-model="xreport.avalanche_slope" ng-options="rat as mainCtrl.translate(rat) for rat in avalanche_slopes"><option value=""></option></select>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.avalanche_slope"></span>
            </div>
          </div>
        </section>

        <section class="section title" ng-show="userCtrl.auth.isAuthenticated()">
          <h2 class="heading show-phone" translate>personal informations</h2>
          <div class="content">

            <div class="form-group half"
                 ng-class="{ 'has-feedback': editForm.age.$touched,
                             'has-error': editForm.age.$touched && editForm.age.$invalid,
                             'has-success': editForm.age.$valid && xreport.age }">
              <label ng-class="{ 'control-label': xreport.age && editForm.nb_impacted.$invalid }"><span translate>age</span></label>
              <div class="input-group">
                <input type="number" name="age" min="0" max="99" ng-model="xreport.age" class="form-control"/>
              </div>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.age"></span>
              <span class="glyphicon glyphicon-warning-sign form-control-feedback" ng-show="editForm.xreport.age.$touched && editForm.xreport.age.$invalid"></span>
              <div class="help-block" ng-messages="editForm.xreport.age.$error" ng-if="editForm.xreport.age.$touched && editForm.xreport.age.$invalid">
                <p ng-message="number" translate>This field must be lower than 99.</p>
                <p ng-message="number" translate>This field must be a number.</p>
              </div>
            </div>

            <div class="form-group half" ng-class="{'has-success': xreport.gender}" ng-init="genders = [&#39;male&#39;, &#39;female&#39;]">
              <label translate>gender</label>
              <select class="form-control" ng-model="xreport.gender" ng-options="rat as mainCtrl.translate(rat) for rat in genders"><option value=""></option></select>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.gender"></span>
            </div>

            <div class="form-group half" ng-class="{'has-success': xreport.author_status}" ng-init="author_statuses = [&#39;primary_impacted&#39;, &#39;secondary_impacted&#39;, &#39;internal_witness&#39;, &#39;external_witness&#39;]">
              <label app-context-help context-help-title="{{'author_status' | translate}}" context-help-content-url="/static/partials/contexthelp/xreport-author_status.html" translate>author_status</label>
              <select class="form-control" ng-model="xreport.author_status" ng-options="rat as mainCtrl.translate(rat) for rat in author_statuses"><option value=""></option></select>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.author_status"></span>
            </div>

            <div class="form-group half" ng-class="{'has-success': xreport.autonomies}" ng-init="autonomies = [&#39;non_autonomous&#39;, &#39;autonomous&#39;, &#39;initiator&#39;, &#39;expert&#39;]">
              <label app-context-help context-help-title="{{'autonomy' | translate}}" context-help-content="{{'Autonomy for practising this activity.' | translate}}" translate>autonomy</label>
              <select class="form-control" ng-model="xreport.autonomy" ng-options="rat as mainCtrl.translate(rat) for rat in autonomies"><option value=""></option></select>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.autonomy"></span>
            </div>

            <div class="form-group half" ng-class="{'has-success': xreport.activity_rate}" ng-init="activity_rates = [&#39;activity_rate_150&#39;, &#39;activity_rate_50&#39;, &#39;activity_rate_30&#39;, &#39;activity_rate_20&#39;, &#39;activity_rate_10&#39;, &#39;activity_rate_5&#39;, &#39;activity_rate_1&#39;]">
              <label translate>activity_rate</label>
              <select class="form-control" ng-model="xreport.activity_rate" ng-options="rat as mainCtrl.translate(rat) for rat in activity_rates"><option value=""></option></select>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.activity_rate"></span>
            </div>

            <div class="form-group half" ng-class="{'has-success': xreport.nb_outings}" ng-init="nb_outings = [&#39;nb_outings_4&#39;, &#39;nb_outings_9&#39;, &#39;nb_outings_14&#39;, &#39;nb_outings_15&#39;]">
              <label translate>nb_outings</label>
              <select class="form-control" ng-model="xreport.nb_outings" ng-options="rat as mainCtrl.translate(rat) for rat in nb_outings"><option value=""></option></select>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.nb_outings"></span>
            </div>

            <div class="form-group half" ng-class="{'has-success': xreport.previous_injuries}" ng-init="previous_injuries = [&#39;no&#39;, &#39;previous_injuries_2&#39;, &#39;previous_injuries_3&#39;]">
              <label translate>previous_injuries</label>
              <select class="form-control" ng-model="xreport.previous_injuries" ng-options="rat as mainCtrl.translate(rat) for rat in previous_injuries"><option value=""></option></select>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.previous_injuries"></span>
            </div>

          </div>
        </section>

      </div>

      <div class="step step-2">


        <section class="section">
          <h2 class="heading show-phone" translate>description</h2>
          <div class="content">

            <div id="summary-group" class="form-group full">
              <label translate>summary</label>
              <textarea app-markdown-editor name="summary" ng-model="xreport.locales[0].summary" class="form-control"></textarea>
            </div>

            <div id="description-group" class="form-group full">
              <label translate>description</label>
              <textarea app-markdown-editor name="description" ng-model="xreport.locales[0].description" class="form-control description" placeholder="{{'Details of the actual outing and the incident. If you have already written up your outing, you only need to describe the incident, then link it to your outing report (after first uploading it)' | translate}}"></textarea>
            </div>

            <div id="participants-group" class="form-group  full">
              <label translate>associated_participants</label>

              <section class="section associations">
                <app-simple-search parent-id="xreport.document_id"
                                   app-select="editCtrl.documentService.pushToAssociations(doc, 'users')" dataset="u"></app-simple-search>
                <section class="associated-section flex wrap-row">
                  <h5 translate ng-show="xreport.associations.users.length == 0">You can look up for users that were with you during the accident.</h5>
                    <div class="list-item users new-item" ng-repeat="user in xreport.associations.users track by user.name">
                      <app-card app-card-doc="{'name': user['name'], 'type': 'u', 'locales': [] }"></app-card>
                      <span class="glyphicon glyphicon-trash"
                            ng-click="editCtrl.documentService.removeAssociation(user.document_id, 'users', $event)"
                            ng-show="xreport.associations.users.length > 1"></span>
                    <span class="glyphicon glyphicon-trash"
                          ng-click="editCtrl.documentService.removeAssociation(user.document_id, 'users', $event)"
                          ng-show="xreport.associations.users.length > 1"></span>
                  </div>
                </section>

              </section>
            </div>

          </div>
        </section>

        <section class="section">
          <h2 class="heading show-phone" translate>factors</h2>
          <div class="content">

            <div id="place-group" class="form-group full">
              <label translate>place</label>
              <textarea app-markdown-editor name="description" ng-model="xreport.locales[0].place" class="form-control" placeholder="{{'Information on the location of the incident.  Mark the location on the map above, even if you cannot do very accurately, (in which case give more details here).  After completing the report, you can associate it to a route, a climbing site or an outing.' | translate}}"></textarea>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.locales[0].place"></span>
            </div>

            <div id="route_study-group" class="form-group full">
              <label translate>route_study</label>
              <textarea app-markdown-editor name="route_study" ng-model="xreport.locales[0].route_study" class="form-control" placeholder="{{'Maps, guidebooks and outings reports consulted. Evaluation of the route during the outing.' | translate}}"></textarea>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.locales[0].route_study"></span>
            </div>

            <div id="conditions-group" class="form-group full">
              <label translate>conditions study</label>
              <textarea app-markdown-editor name="conditions" ng-model="xreport.locales[0].conditions" class="form-control" placeholder="{{'Describe the information gathered before the outing and how these evolved once on route: weather forecast, avalanche risk reports, amount of refreezing, condition of the snow/ice/rock, reports from the previous days, etc.' | translate}}"></textarea>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.locales[0].conditions"></span>
            </div>

            <div id="training-group" class="form-group full">
              <label translate>training</label>
              <textarea app-markdown-editor name="training" ng-model="xreport.locales[0].training" class="form-control" placeholder="{{'At the time of the incident, describe your technical level, your physical condition, how tired you had become just prior to the incident, and, if at altitude, how well you were acclimatized, etc.' | translate}}"></textarea>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.locales[0].training"></span>
            </div>

            <div id="motivations-group" class="form-group full">
              <label translate>motivations</label>
              <textarea app-markdown-editor name="motivations" ng-model="xreport.locales[0].motivations" class="form-control" placeholder="{{'Why did you choose this outing? When did you decide to engage. What influenced your decision (holiday time, long journey, hotel/hut bookings, time spent already in preparation, limited possibilities, etc.)?' | translate}}"></textarea>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.locales[0].motivations"></span>
            </div>

            <div id="group_management-group" class="form-group full">
              <label translate>group_management</label>
              <textarea app-markdown-editor name="group_management" ng-model="xreport.locales[0].group_management" class="form-control" placeholder="{{'Communication of the individual objectives and expectations, the thoughts and observations during the outing, discussions on new strategies, the way the group conducted itself and divided responsibilities, was the group used to working together, core aspirations, etc.' | translate}}"></textarea>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.locales[0].group_management"></span>
            </div>

            <div id="risk-group" class="form-group full">
              <label translate>risk</label>
              <textarea app-markdown-editor name="risk" ng-model="xreport.locales[0].risk" class="form-control" placeholder="{{'Have you (re)evaluated the risks at each change in the situation? What factors might have affected your awareness, such as tiredness, stress, relaxing having passed the main difficulties or on the descent, on a section reputed to be easy, presence of footprints or other people, complete confidence in the leader of the group, etc.' | translate}}"></textarea>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.locales[0].risk"></span>
            </div>

            <div id="time_management-group" class="form-group full">
              <label translate>time_management</label>
              <textarea app-markdown-editor name="time_management" ng-model="xreport.locales[0].time_management" class="form-control" placeholder="{{'Had a timetable for the route been foreseen? Did you maintain the schedule? Was time a factor in causing the incident?' | translate}}"></textarea>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.locales[0].time_management"></span>
            </div>

            <div id="safety-group" class="form-group full">
              <label app-context-help context-help-title="{{'safety' | translate}}" context-help-content-url="/static/partials/contexthelp/xreport-safety.html"	translate>safety</label>
              <textarea app-markdown-editor name="safety" ng-model="xreport.locales[0].safety" class="form-control" placeholder="{{'Types of belay and protection used, verifications between climbers, snowpack stability tests, testing of avalanche transceivers, etc.' | translate}}"></textarea>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.locales[0].safety"></span>
            </div>

            <div id="reduce_impact-group" class="form-group full">
              <label app-context-help context-help-title="{{'reduce_impact' | translate}}" context-help-content-url="/static/partials/contexthelp/xreport-reduce_impact.html" translate>reduce_impact</label>
              <textarea app-markdown-editor name="reduce_impact" ng-model="xreport.locales[0].reduce_impact" class="form-control"></textarea>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.locales[0].reduce_impact"></span>
            </div>

            <div id="increase_impact-group" class="form-group full">
              <label app-context-help context-help-title="{{'increase_impact' | translate}}" context-help-content-url="/static/partials/contexthelp/xreport-increase_impact.html" translate>increase_impact</label>
              <textarea app-markdown-editor name="increase_impact" ng-model="xreport.locales[0].increase_impact" class="form-control"></textarea>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.locales[0].increase_impact"></span>
            </div>

            <div id="modifications-group" class="form-group full">
              <label app-context-help context-help-title="{{'modifications' | translate}}" context-help-content-url="/static/partials/contexthelp/xreport-modifications.html" translate>modifications</label>
              <textarea app-markdown-editor name="modifications" ng-model="xreport.locales[0].modifications" class="form-control"></textarea>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.locales[0].modifications"></span>
            </div>

            <div id="other_comments-group" class="form-group full">
              <label translate>other_comments</label>
              <textarea app-markdown-editor name="other_comments" ng-model="xreport.locales[0].other_comments" class="form-control" placeholder="{{'Briefly describe any injuries. Comments that do not fit into any other fields can be entered here.' | translate}}"></textarea>
              <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="xreport.locales[0].other_comments"></span>
            </div>

            <div class="form-group half">
              <label translate>disable_comments</label>
              <input type="checkbox" ng-model="xreport.disable_comments">
              <span ng-click="editCtrl.pushToArray(xreport, 'disable_comments', !xreport.disable_comments, $event)" translate>If checked, comments cannot be posted or read.</span>
            </div>

          </div>
        </section>

      </div>

        <div class="action-buttons float-buttons">
    <button type="button" class="btn blue-btn btn-lg float-button"
      ng-if="!editForm.$invalid && !editCtrl.hasMissingProps(xreport, false)"
      ng-click="editCtrl.preview()"
      tooltip-placement="left" uib-tooltip="{{'Preview' | translate}}">
      <span class="glyphicon glyphicon-eye-open"></span>
    </button>
    <button type="submit" class="btn orange-btn btn-lg float-button"
      ng-if="!editForm.$invalid && !editCtrl.hasMissingProps(xreport, false)"
      tooltip-placement="left" uib-tooltip="{{'Save' | translate}}">
      <span class="glyphicon glyphicon-ok"></span>
    </button>
    <button type="button" class="btn orange-btn btn-lg float-button"
      ng-style="(editForm.$invalid || editCtrl.hasMissingProps(xreport, false)) && {'opacity': 0.5}"
      tooltip-placement="left" uib-tooltip="{{'What is missing?' | translate}}"
      ng-if="editForm.$invalid || editCtrl.hasMissingProps(xreport, false)"
      ng-click="editCtrl.hasMissingProps(xreport, true)">
      <span class="glyphicon glyphicon-ok"></span>
    </button>
    
    <button type="button" class="btn gray-btn btn-lg float-button"
      ng-click="editCtrl.cancel('', '/xreports')"
      tooltip-placement="left" uib-tooltip="{{'Cancel' | translate}}">
      <span class="glyphicon glyphicon-remove"></span>
    </button>
  </div>


    </section>
  </form>
    <div class="ng-hide">
    <div id="preview-container">
      <div id="preview-container-content"></div>
      <button class="btn btn-warning" type="button" ng-click="previewModalCtrl.close()" translate>Close</button>
    </div>
  </div>

    <section id="save-confirmation-modal">
    <h3 class="heading show-phone" translate>summary</h3>
    <div class="content">
      <div class="full comment" ng-class="{'has-success': saveCtrl.quality}">
        <label translate>quality</label>
        <select ng-model="saveCtrl.quality" ng-options="type as saveCtrl.langService.translate(type) for type in [&#39;empty&#39;, &#39;draft&#39;, &#39;medium&#39;, &#39;fine&#39;, &#39;great&#39;]" class="form-control">
          <option value=""></option>
        </select>
      </div>

      <div class="text-center">
        <button ng-click="saveCtrl.close({'message': saveCtrl.message, 'quality': saveCtrl.quality})" class="btn btn-success" translate>Save</button>
        <button ng-click="saveCtrl.close()" class="btn btn-danger" translate>Cancel</button>
      </div>
    </div>
  </section>

</section>

    </main>
    <div class="page-header">
      <button class="btn btn-default menu-open-close header"><span class="glyphicon glyphicon-menu-hamburger"></span></button>
      <a href="/" title="{{'Back to homepage'|translate}}" class="logo header">
        <img src="/static/e2dd4b1/img/logo2.svg" alt="Camptocamp.org"/>
      </a>
      <div class="quick-search">
        <app-simple-search app-simple-search-standard="true" dataset="wrcb"></app-simple-search>
      </div>
      <app-user></app-user>

      <button class="btn orange-btn" id="add-my-outing" protected-url-btn url="/outings/add"><span class="glyphicon glyphicon-plus-sign"></span><span translate>add an outing</span></button>

      <div class="lang-user">
        <div class="lang-selector">
          <app-lang></app-lang>
        </div>
      </div>
    </div>
    <app-alerts></app-alerts>
<script src="https://www.camptocamp.org/static/e2dd4b1/build/deps.js"></script>
<script src="./j.js"></script>
<!--
    <script src="https://www.camptocamp.org/static/e2dd4b1/build/deps.js"></script>
    

-->

    <script>
      (function() {
        // prevent loading a file from accidental image drag-drop outside the drop-box
        window.addEventListener("dragover",function(e){
          e = e || event;
          e.preventDefault();
        },false);
        window.addEventListener("drop",function(e){
          e = e || event;
          e.preventDefault();
        },false);

         var module = angular.module('app');
         module.constant('langUrlTemplate', 'https://www.camptocamp.org/static/e2dd4b1/build/locale/__lang__/c2corg_ui.json');
         module.constant('langMomentPath', '/static/e2dd4b1/build/locale_moment');
         module.constant('imgPath', '/static/e2dd4b1/img');
         module.constant('apiUrl', 'https://api.camptocamp.org');
         module.constant('imageBackendUrl', 'https://images.camptocamp.org');
         module.constant('imageUrl', 'https://media.camptocamp.org/c2corg_active/');
         module.constant('discourseUrl', 'https://forum.camptocamp.org/');
         module.constant('authUrl', '/auth');
         module.constant('textFormatingUrl', '/articles/151910');
         module.constant('langs', ['fr','it','de','en','es','ca','eu']);
         module.constant('mapApiKeys', {
           'ign': 'lwymc6762him8xe5ixxw2gjv',
           'bing': 'AudizIfCd3NAdt91ubJMGkMI-swfHxe1R-_U7KiLxCHqepDy70txQ-_-89_eevxc'
         });
         module.config(function(vcRecaptchaServiceProvider) {
           vcRecaptchaServiceProvider.setSiteKey('6Lc9Cw4UAAAAAIKnlar0AOsGX_P5S-bk9u8viuo2');
         });

         
         module.value('mapFeatureCollection', null);
         
         document.querySelector('.loading-gif').style.display = 'none';
         $('.on-load').removeClass('loading on-load');
         app.sidemenu();
      })();
    </script>
    <script>
      window.ga=function(){ga.q.push(arguments)};ga.q=[];ga.l=+new Date;
      ga('create','UA-2814179-1',{'cookieDomain':window.location.host});
      ga('send','pageview',{'anonymizeIp':true});
    </script>
    <script src="https://www.google-analytics.com/analytics.js" async defer></script>
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-58abf6b4f3a680cb" async defer></script>
  </body>
</html>
